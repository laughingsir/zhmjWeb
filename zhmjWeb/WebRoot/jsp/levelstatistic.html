<!DOCTYPE html>
<html>
  <head>
    <title>等级分布统计</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  </head>
  <body>
  	<div style="padding:10px">
	<div class="easyui-panel" title="" style="width:100%">
		<div style="padding:10px">
	    <form id="queryPlayerForm" method="post" style="height:auto">
	    	服务器:<input class="easyui-combobox" id="zoneCombo" data-options="
					data:allZone,
					valueField:'id',
					textField:'name',
					panelHeight:'auto',
					loadFilter:zoneFilter,
					onLoadSuccess:selectQueryPlayerFirstZone
				">
	    	查询类型:<select id="queryType" class="easyui-combobox" style="width:100px;">
							<option value="0" selected>玩家账号</option>
							<option value="1">昵称</option>
						</select>
			关键字:<input id="keyWord" class="easyui-textbox" type="text" >			
	    	<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-search" onclick="submitQueryPlayerForm()" style="width:80px">查询</a>
	    </form>
	    </div>
	<table id="queryPlayerGrid"  class="easyui-datagrid" title="查询玩家信息" style="width:100%;height:auto"
			data-options="singleSelect:true,collapsible:false,loadMsg:'数据加载中请稍后……',pagination: true,rownumbers: true">
		<thead>
			<tr>
				<th data-options="field:'playerId',width:80">玩家账号</th>
				<th data-options="field:'nickName',width:100">昵称</th>
				<th data-options="field:'vipLevel',width:60,align:'center'">VIP等级</th>
				<th data-options="field:'level',width:60,align:'center'">等级</th>
				<th data-options="field:'payGold',width:60,align:'center'">充值元宝</th>
				<th data-options="field:'bindingGold',width:60,align:'center'">绑定元宝</th>
				<th data-options="field:'silver',width:100,align:'center'">银币</th>
				<th data-options="field:'power',width:60,align:'center'">体力</th>
				<th data-options="field:'regTime',width:120">注册时间</th>
			</tr>
		</thead>
	</table>
	</div>
	<script>
		$(function(){
			loadAllZone();
		});
		
		function selectQueryPlayerFirstZone(){
			var data = $("#zoneCombo").combobox('getData');
			$("#zoneCombo").combobox('select',data[0].id);
		}
		
		function submitQueryPlayerForm(){
			var data = {
				zone : $('#zoneCombo').combobox('getValue'),
				queryType : $('#queryType').combobox('getValue'),
				keyWord : $('#keyWord').val().trim(),
			};
		    $('#queryPlayerForm').form('submit', submit('QueryPlayerInfo',data,
				function () {  
                    if($("#keyWord").val().trim()==""){
						showWarningF("请输入关键字",function(){
							$("#keyWord").focus();
						});
						return false;
					}
                },function (result) {
			        $('#queryPlayerGrid').datagrid({loadFilter:pagerFilter}).datagrid({data: getListData(result.players)});
			    }    
            ));  
		}
	</script>
	</div>
  </body>
</html>
