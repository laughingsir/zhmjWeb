<!DOCTYPE html>
<html>
  <head>
    <title>修改密码</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  </head>
  <body>
   
  	<div style="padding:10px">
	<div class="easyui-panel" title="" style="width:100%,height:auto">
		<div style="padding:10px 60px 20px 60px">
	    <form id="changePasswordForm" method="post">
	    	<table cellpadding="5">
	    		<tr>
	    			<td>原密码：</td>
	    			<td>
	    				<input class="easyui-textbox" id="oldPassword" type="password" style="width:200px">
					</td>
	    		</tr>
	    		<tr>
	    			<td >新密码：</td>
	    			<td>
	    				<input class="easyui-textbox" id="newPassword1" type="password" style="width:200px">
					</td>
	    		</tr>
	    		<tr>
	    			<td>确认密码：</td>
	    			<td>
	    				<input class="easyui-textbox" id="newPassword2" type="password" style="width:200px">
					</td>
	    		</tr>
	    		<tr>
	    			<td colspan=2 style="text-align:center">
	    				<a href="javascript:void(0)" data-options="iconCls:'icon-edit',width:80" class="easyui-linkbutton" onclick="changePassword()">修改</a>
	    			</td>
	    		</tr>
	    	</table>
	    </form>
	    </div>
	</div>
		
	<script>
		function changePassword(){
			var data = {
				oldPassword : $('#oldPassword').val().trim(),
				newPassword : $('#newPassword1').val().trim(),
			};
		    $('#changePasswordForm').form('submit', submit('ChangePassword',data,
				function () {  
                    if($("#oldPassword").val().trim()==""){
						showWarningF("请输入原密码",function(){
							$("#oldPassword").focus();
						});
						return false;
					}
					if($("#newPassword1").val().trim()==""){
						showWarningF("请输入新密码",function(){
							$("#newPassword1").focus();
						});
						return false;
					}
					if($("#newPassword2").val().trim()!=$("#newPassword1").val().trim()){
						showWarningF("两次输入密码必须一致",function(){
							$("#newPassword2").focus();
						});
						return false;
					}
                },function (result) {
                	if(result.status == 0){
						showMessage("修改密码成功");
					}else if(result.status == 1){
						showError("原密码错误");
					}
			    }    
            ));  
		}
	</script>
	</div>
  </body>
</html>
